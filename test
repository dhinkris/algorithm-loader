#!/bin/bash


#----------------------------------------------------------------------
#
#  For module BETnii.gz_1:
#
#  total number of jobs = 1
#
#----------------------------------------------------------------------
#
#  For module FLIRTnii.gz_1:
#
#  total number of jobs = 1
#
#----------------------------------------------------------------------
#
#  For module ApplyWarpnii.gz_1:
#
#  total number of jobs = 1
#
#----------------------------------------------------------------------
#  For all modules:
#  grand total number of jobs:  3  =  1+1+1
#----------------------------------------------------------------------

#-------------------------------------------------------------------------------
#  BETnii.gz_1
#  BET (Brain Extraction Tool) deletes non-brain tissue from an image of the ...
   echo "---- Executing module BETnii.gz_1 ----"
#-------------------------------------------------------------------------------

/bet \
	  /Users/cnmc/test-image/fetus_02091_pucorbrain2mmssfse_mr_3200_phase_00.nii.gz \
	  BETnii.gz_1.OutputFile.nii.gz

#-------------------------------------------------------------------------------
#  FLIRTnii.gz_1
#  FLIRT (FMRIB's Linear Image Registration Tool) is a fully automated robust...
   echo "---- Executing module FLIRTnii.gz_1 ----"
#-------------------------------------------------------------------------------

/flirt \
	  -in /Users/cnmc/test-image/fetus_02091_pucorbrain2mmssfse_mr_3200_phase_00_mask.nii.gz \
	  -ref /Users/cnmc/test-image/fetus_02091_pucorbrain2mmssfse_mr_3200_phase_00_mask.nii.gz \
	  -out FLIRTnii.gz_1.Output.nii.gz

#-------------------------------------------------------------------------------
#  ApplyWarpnii.gz_1
#  Apply nonlinear transformation generated by FNIRT.
   echo "---- Executing module ApplyWarpnii.gz_1 ----"
#-------------------------------------------------------------------------------

/applywarp \
	  -i FLIRTnii.gz_1.Output \
	  -r BETnii.gz_1.OutputFile \
	  -w /Users/cnmc/test-image/fetus_02234_02_recon_transformed_extracted_brain.nii.gz \
	  -o ApplyWarpnii.gz_1.OutputImage.nii.gz

